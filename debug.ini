[server:main]
use = egg:waitress#main
host = localhost
port = 8080

[application:main]
use = egg:ws.haemera#main

sqlalchemy.url = sqlite:///haemera.db

query.todo =
    SELECT * FROM action
    WHERE (project is null OR project <> 'work') AND
    (status = 'todo' OR (status = 'scheduled' AND timestamp <= date('now')))
    ORDER BY priority DESC, topic, subject
query.work =
    SELECT * FROM action
    WHERE project = 'work' AND
    (status = 'todo' OR (status = 'scheduled' AND timestamp <= date('now')))
    ORDER BY priority DESC, topic, subject
query.waiting =
    SELECT * FROM action
    WHERE status = 'scheduled' AND delegate is not null
    ORDER BY timestamp, topic, subject
query.scheduled =
    SELECT * FROM action
    WHERE status = 'scheduled' AND delegate is null
    ORDER BY timestamp, start_time, topic, subject
query.recurring =
    SELECT * FROM action
    WHERE status = 'recurring'
    ORDER BY topic, subject
query.done =
    SELECT * FROM action
    WHERE status = 'done'
    ORDER BY done_at DESC

ical.scheduled =
    SELECT * FROM action
    WHERE status = 'scheduled' AND delegate is null
    AND (project is null OR project <> 'work')
    ORDER BY timestamp

[loggers]
keys = root, ws

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_ws]
level = DEBUG
handlers =
qualname = ws

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s
