{% set page_title = "Projects" %}
{% extends "templates/layout.html" %}

{% block body %}
<div class="container-fluid">

<h3 class="topic-{{project.topic}}">{{project.subject}}</h3>

<a class="btn btn-secondary"
   href="{{request.route_url('project', project=project.id,
         _query={'done': 'true'} if not request.params.get('done') else None)}}">
{% if request.params['done'] %}
  Hide done
{% else %}
  Show done
{% endif %}
</a>

{% if project.id != 'root' %}
<a href="{{request.route_url('project_edit', project=project.id)}}"
   class="btn btn-raised btn-primary">Edit
</a>
{% else %}
<a href="{{request.route_url('project_new')}}"
   class="btn btn-raised btn-primary">New Project
</a>
{% endif %}

{% for child in children %}
<div>
  <a href="{{request.route_url('project', project=child.id)}}"
     class="topic-{{child.topic}}">
    {{child.subject | replace(project.subject ~ '|', '')}}
  </a>
</div>
{% endfor %}

{% if project.body %}
<pre>
{{project.body}}
</pre>
{% endif %}

<div style="margin-top: 1em">
{% if project.id != 'root' %}
<a href="{{request.route_url('project_actions', project=project.id)}}"
   class="btn btn-raised btn-secondary">
  Actions
</a>
{% endif %}
</div>

</div>

{% endblock %}
